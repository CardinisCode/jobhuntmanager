{% extends "layout.html" %}

{% block title %}
    Dashboard
{% endblock %}

{% block main %}
    <div class="alignfull"> 
        <div class="aligncenter">
            <h1 class="h1-heading"> Dashboard </h1>

            {% if get_flashed_messages() %}
                {% for message in get_flashed_messages() %}
                    <div class="flash alert alert-success border text-center">{{ message }}</div>
                {% endfor %}
            {% endif %}
        </div>
    </div>

    <div class="alignfull background-colour">
        <div class="aligncenter">  
            <h2 class="heading-extra-margins"> Today's Stats:</h2>
            <div class="form-row">
                <div class="col">
                    <dt class="text-center border-bottom border-right border-left border-top bkground_blue"> Applications Submitted Today</dt>
                    <dd class="text-center border-bottom border-right border-left border-top display-fields"> {{ display.applications_today }}</dd>
                </div>
                <div class="col">
                    <dt class="text-center border-bottom border-right border-left border-top bkground_blue"> Interviews Today</dt>
                    <dd class="text-center border-bottom border-right border-left border-top display-fields"> {{ display.interviews_today }}</dd>
                </div>
                <div class="col">
                    <dt class="text-center border-bottom border-right border-left border-top bkground_blue"> Job Offers</dt>
                    <dd class="text-center border-bottom border-right border-left border-top display-fields"> {{ display.job_offer_count }}</dd>
                </div>
            </div>
        </div>
    </div>

    {% if display.total_application_count == 0 %}
        <div class="alignfull">
            <div class="aligncenter">  
                {% if display.total_application_count == 0 %}
                    <h2 class="card-headings"> Start adding your job applications:</h2>
                    <div class="link-div-styling"> 
                        <a href={{ display.add_application_url }} class="link_button_primary text-center extra-button-styles"><i class="fas fa-plus"> Add Job Application </i></a>
                    </div>
                {% endif %}
            </div>
        </div>
    {% else %}
        <div class="alignfull">
            <div class="aligncenter">  
                <div class="link-div-styling"> 
                    <a href={{ display.add_application_url }} class="link_button_primary text-center extra-button-styles"><i class="fas fa-plus"> Add Job Application </i></a>
                    {% if job_offer_details == None %}
                        <a href="/applications" class="link_button_primary text-center link_middle extra-button-styles"><i class="fas fa-eye"> View all Applications</i> </a>
                        <a href="/add_job_offer" class="link_button_primary text-center link-right extra-button-styles"><i class="fas fa-plus"> Add Job Offer</i> </a>
                    {% else %}
                        <a href="/applications" class="link_button_primary text-center link-right extra-button-styles"><i class="fas fa-eye"> View all Applications</i> </a>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endif %}

    {% if display.job_offer_details.fields %}
        <div class="alignfull background-colour">
            <div class="aligncenter">  
                <h2 class="card-headings"> Job Offers </h2>
                <div class="grid_experiement extra-margins">
                {% for job_offer_id, job_offer in display.job_offer_details.fields.items() %}
                    <a href={{ job_offer.view_offer_url }} class="link-cards-alt-colour">
                        <i class="fas fa-hand-pointer"></i><h3 class="text-center"> {{ job_offer.company_name }}</h3>
                        <div class="form-row">
                            <div class="col left-padding"> 
                                <i class="fas fa-calendar-alt"></i><strong> Starting Date:</strong>
                            </div>
                            <div class="col right-padding"> 
                                {{ job_offer.starting_date }}
                            </div>
                        </div>
                        {% if job_offer.job_role %}
                            <div class="form-row extra-margins"> 
                                <div class="col left-padding"> 
                                    <i class="fas fa-pencil-ruler"></i> <strong> Job Role:</strong>
                                </div>
                                <div class="col right-padding"> 
                                    {{ job_offer.job_role }}
                                </div>
                            </div>
                        {% endif %}
                        {% if job_offer.offer_response %}
                            <div class="form-row extra-margins"> 
                                <div class="col left-padding"> 
                                    <i class="fas fa-question"></i><strong> Offer Response:</strong>
                                </div>
                                <div class="col right-padding"> 
                                    {{ job_offer.offer_response }}
                                </div>
                            </div>
                        {% endif %}
                        {% if job_offer.salary_offered %}
                            <div class="form-row extra-margins"> 
                                <div class="col left-padding"> 
                                    <i class="fas fa-hand-holding-usd"></i><strong> Salary On Offer:</strong>
                                </div>  
                                <div class="col right-padding"> 
                                    {{ job_offer.salary_offered }}
                                </div>    
                            </div>                
                        {% endif %}
                        {% if job_offer.perks_offered %}
                            <div class="form-row extra-margins"> 
                                <div class="col left-padding"> 
                                    <i class="fas fa-bars"></i><strong> Perks Offered: </strong>
                                </div>  
                                <div class="col right-padding"> 
                                    {{ job_offer.perks_offered }}
                                </div> 
                            </div>         
                        {% endif %}
                    </a>
                {% endfor %}
                </div>
                <br/>
            </div>
        </div>
    {% endif %}

    {% if display.job_offer_details.fields %}
        {% if display.interview_details.fields %}
            <div class="alignfull xxx-margins"> 
                <div class="aligncenter"> 
                    <h2 class="card-headings"> Upcoming Interviews </h2>
                    <div class="three-col-grid extra-margins"> 
                        {% for interview_id, interview_details in display.interview_details.fields.items() %}
                            <a href={{ interview_details.View_More }} class="link-cards">
                                <i class="fas fa-hand-pointer"></i><h4 class="card-headings"> {{ interview_details.company_name }} </h4>
                                <div class="card-content"> 
                                    <div class="form-row">
                                        <div class="col"> 
                                            <i class="fas fa-calendar-alt"> {{ interview_details.date }} @ {{ interview_details.time }}</i>
                                        </div>
                                    </div>
                                    <div class="form-row extra-margins">
                                        {% if interview_details.interview_type == 'iIn Person / On Site' %}
                                            <div class="col"> 
                                                <i class="fas fa-location-arrow"> {{ interview_details.Location }} </i>
                                            </div>
                                        {% elif interview_details.interview_type == 'Video / Online' %}
                                            <div class="col"> 
                                                <i class="fas fa-video"> {{ interview_details.interview_medium }} </i>
                                            </div>
                                        {% else %}
                                            <div class="col"> 
                                                <i class="fas fa-mobile-alt"> {{ interview_details.contact_number }} </i>
                                            </div>
                                        {% endif %}
                                    </div>
                                    {% if interview_details.interviewers %}
                                        <div class="form-row extra-margins">
                                            <div class="col"> 
                                                <i class="fas fa-users"> {{ interview_details.interviewers }} </i>
                                            </div>
                                        </div>
                                    {% else %}
                                        <div class="form-row"></div>
                                    {% endif %}
                                    {% if interview_details.past_dated %}
                                        <div class="form-row extra-margins">
                                            <div class="col card-warning-message"> 
                                                <i class="fas fa-exclamation"></i> This is a past-dated interview!
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                            </a>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% endif %}
    {% else %}
        {% if display.interview_details.fields %}
            <div class="alignfull xxx-margins background-colour"> 
                <div class="aligncenter"> 
                    <h2 class="card-headings"> Upcoming Interviews </h2>
                    <div class="three-col-grid extra-margins"> 
                        {% for interview_id, interview_details in display.interview_details.fields.items() %}
                            <a href={{ interview_details.View_More }} class="link-cards">
                                <i class="fas fa-hand-pointer"></i><h4 class="card-headings"> {{ interview_details.company_name }} </h4>
                                <div class="card-content"> 
                                    <div class="form-row">
                                        <div class="col"> 
                                            <i class="fas fa-calendar-alt"> {{ interview_details.date }} @ {{ interview_details.time }}</i>
                                        </div>
                                    </div>
                                    <div class="form-row extra-margins">
                                        {% if interview_details.interview_type == 'iIn Person / On Site' %}
                                            <div class="col"> 
                                                <i class="fas fa-location-arrow"> {{ interview_details.Location }} </i>
                                            </div>
                                        {% elif interview_details.interview_type == 'Video / Online' %}
                                            <div class="col"> 
                                                <i class="fas fa-video"> {{ interview_details.interview_medium }} </i>
                                            </div>
                                        {% else %}
                                            <div class="col"> 
                                                <i class="fas fa-mobile-alt"> {{ interview_details.contact_number }} </i>
                                            </div>
                                        {% endif %}
                                    </div>
                                    {% if interview_details.interviewers %}
                                        <div class="form-row extra-margins">
                                            <div class="col"> 
                                                <i class="fas fa-users"> {{ interview_details.interviewers }} </i>
                                            </div>
                                        </div>
                                    {% else %}
                                        <div class="form-row"></div>
                                    {% endif %}
                                    {% if interview_details.past_dated %}
                                        <div class="form-row extra-margins">
                                            <div class="col card-warning-message"> 
                                                <i class="fas fa-exclamation"></i> This is a past-dated interview!
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                            </a>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% endif %}
    {% endif %}

    

{% endblock %}