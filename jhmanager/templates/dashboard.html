{% extends "layout.html" %}

{% block title %}
    Dashboard
{% endblock %}

{% block main %}
<div class="alignfull"> 
    <div class="aligncenter">     
        <h1 class="text-center"> Dashboard </h1>

            {% if get_flashed_messages() %}
                {% for message in get_flashed_messages() %}
                    <div class="flash alert alert-success border text-center">{{ message }}</div>
                {% endfor %}
            {% endif %}

            <div> 
                <div class="form-row">
                    <div class="col">
                        <dt class="text-center border-bottom border-right border-left border-top bkground_blue"> Applications Submitted Today</dt>
                        <dd class="text-center border-bottom border-right border-left border-top display-fields"> {{ display.applications_today }}</dd>
                    </div>
                    <div class="col">
                        <dt class="text-center border-bottom border-right border-left border-top bkground_blue"> Interviews Today</dt>
                        <dd class="text-center border-bottom border-right border-left border-top display-fields"> {{ display.interviews_today }}</dd>
                    </div>
                    <div class="col">
                        <dt class="text-center border-bottom border-right border-left border-top bkground_blue"> Job Offers</dt>
                        <dd class="text-center border-bottom border-right border-left border-top display-fields"> {{ display.job_offer_count }}</dd>
                    </div>
                </div>
            </div>
            <br/>

            <div class="button-grid"> 
                <a href={{ display.add_application_url }} class="link_button_primary text-center extra-button-styles"><i class="fas fa-plus"> Add Job Application </i></a>
                {% if job_offer_details == None %}
                    <a href="/applications" class="link_button_primary text-center link_middle extra-button-styles"><i class="fas fa-eye"> View all Applications</i> </a>
                    <a href="/add_job_offer" class="link_button_primary text-center link-right extra-button-styles"><i class="fas fa-plus"> Add Job Offer</i> </a>
                {% else %}
                    <a href="/applications" class="link_button_primary text-center link-right extra-button-styles"><i class="fas fa-eye"> View all Applications</i> </a>
                {% endif %}
            </div>
        </div>
    </div>
    <!-- <hr/> -->
    <div class="alignfull background-colour">
        <div class="aligncenter">  
            {% if job_offer_details != None %}
                <h2 class="text-center"> Job Offers </h2>
                <br/>

                <div class="grid_experiement">
                {% for job_offer_id, fields in display.job_offer_details.items() %}
                    <div class="grid_child"> 
                        <h3 class="text-center"> {{ fields.company_name }}</h3>
                        <div class="form-row">
                            <div class="col left-padding"> 
                                <i class="fas fa-calendar-alt"></i><strong> Starting Date:</strong>
                            </div>
                            <div class="col right-padding"> 
                                {{ fields.starting_date }}
                            </div>
                        </div>
                        {% if fields.job_role %}
                            <div class="form-row"> 
                                <div class="col left-padding"> 
                                    <i class="fas fa-pencil-ruler"></i> <strong> Job Role:</strong>
                                </div>
                                <div class="col right-padding"> 
                                    {{ fields.job_role }}
                                </div>
                            </div>
                        {% endif %}
                        {% if fields.offer_response %}
                            <div class="form-row"> 
                                <div class="col left-padding"> 
                                    <i class="fas fa-question"></i><strong> Offer Response:</strong>
                                </div>
                                <div class="col right-padding"> 
                                    {{ fields.offer_response }}
                                </div>
                            </div>
                        {% endif %}
                        {% if fields.salary_offered %}
                            <div class="form-row"> 
                                <div class="col left-padding"> 
                                    <i class="fas fa-hand-holding-usd"></i><strong> Salary On Offer:</strong>
                                </div>  
                                <div class="col right-padding"> 
                                    {{ fields.salary_offered }}
                                </div>    
                            </div>                
                        {% endif %}
                        {% if fields.perks_offered %}
                            <div class="form-row"> 
                                <div class="col left-padding"> 
                                    <i class="fas fa-bars"></i><strong> Perks Offered: </strong>
                                </div>  
                                <div class="col right-padding"> 
                                    {{ fields.perks_offered }}
                                </div> 
                            </div>         
                        {% endif %}
                        <br/>
                        {% if fields.update_url %}
                            <div class="text-center"> 
                                <a href={{ fields.view_offer_url }} class="link_button"><i class="fas fa-eye"> View</i></a>
                                <a href={{ fields.update_url }} class="link_button"><i class="fas fa-pencil-alt"> Update</i></a>
                                <a href={{ fields.delete_url }} class="link_button"><i class="fas fa-trash"> Delete</i></a>
                            </div>           
                        {% endif %}
                        <br/>
                    </div>
                {% endfor %}
                </div>
                <br/>
                <div class="text-center xxx-margins"> 
                    <a href="/add_job_offer" class="link_right link_button_primary"><i class="fas fa-plus"> Add Job Offer</i> </a>
                </div>
            </div>
        </div>
        <!-- <hr/> -->
    {% endif %}

    {% if display.all_interviews != None and display.interview_details != None %}
        <div class="alignfull"> 
            <div class="aligncenter"> 
                <h2 class="text-center"> Upcoming Interviews </h2>
                <br/>
                <div class="grid_experiement xxx-margins"> 
                    {% for company_name, interviews in display.interview_details.items() %}
                        <div class="grid_child"> 
                            {% for interview_id, fields in interviews.items() %}
                                <h4 class="text-center"> {{ company_name }} </h4>
                                <div class="form-row">
                                    <div class="col left-padding"> 
                                        <i class="fas fa-calendar-alt"> Date & Time:</i>
                                    </div>
                                    <div class="col right-padding"> 
                                        {{ fields.Date }} @ {{ fields.Time }}
                                    </div>
                                </div>
                                <div class="form-row">
                                    {% if fields.interview_type == 'in_person' %}
                                        <div class="col left-padding"> 
                                            <i class="fas fa-location-arrow"> Location: </i> 
                                        </div>
                                        <div class="col right-padding"> 
                                            {{ fields.Location }} 
                                        </div>
                                    {% elif fields.interview_type == 'video_or_online' %}
                                        <div class="col left-padding"> 
                                            <i class="fas fa-video"> Medium: </i>
                                        </div>
                                        <div class="col right-padding"> 
                                            {{ fields.interview_medium }} 
                                        </div>
                                    {% else %}
                                        <div class="col left-padding"> 
                                            <i class="fas fa-mobile-alt"></i> <strong> Contact Number:</strong> 
                                        </div>
                                        <div class="col right-padding"> 
                                            {{ fields.contact_number }} 
                                        </div>
                                    {% endif %}
                                </div>
                                {% if fields.interviewers %}
                                    <div class="form-row">
                                        <div class="col left-padding"> 
                                            <i class="fas fa-users"> Interviewers: </i>
                                        </div>
                                        <div class="col right-padding"> 
                                            {{ fields.interviewers }} 
                                        </div>
                                    </div>
                                {% else %}
                                    <div class="form-row"></div>
                                {% endif %}
                                {% if fields.past_dated %}
                                    <br/>
                                    <div class="form-row">
                                        <div class="col text-center"> 

                                            This is a past-dated interview! Update below:
                                        </div>
                                    </div>
                                {% else %}
                                    <div class="form-row"></div>
                                {% endif %}
                                <br/>
                                <div class="text-center xxx-margins"> 
                                    {% if fields.past_dated == False %}
                                        <a href={{ fields.prepare_url }} class="link_button"> <i class="fas fa-clipboard"> Prepare</i></a>
                                    {% endif %}
                                    <a href={{ fields.View_More }} class="link_button"><i class="fas fa-eye"> View More</i></a>
                                    <a href={{ fields.update_url }} class="link_button"><i class="fas fa-pencil-alt"> Update</i></a>
                                </div>
                                <br/>
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endif %}

{% endblock %}