{% extends "layout.html" %}

{% block title %}
    Job Applications
{% endblock %}

{% block main %}
    <h1> Job Applications </h1>
    <hr/>

    {% if get_flashed_messages() %}
        {% for message in get_flashed_messages() %}
            <div class="flash alert alert-success border text-center">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <h2> Your Application History: </h2>
    <!-- <a href="/add_job_application" class="button right_button">Add Application</a> -->

    <!-- <p> Today's date: {{ display_details.todays_date }} </p> -->
    {% if display_details.empty_table == True %}
        <p> No Applications add yet. <a href="/add_job_application" style="cursor:pointer; text-align: right;"> <i class="fas fa-plus"> Job Application </i></a></p>
    {% else %}
        <a href="/add_job_application" style="cursor:pointer; text-align: right;"> <i class="fas fa-plus"> Job Application </i></a>
        <table class="center"> 
            <tr class="border-bottom border-right border-left border-top">
                {% for key, value in display_details.items() %}
                    {% if key == "headings"  %}
                        {% for heading in value["headings_list"] %}
                        <th class="border-bottom border-right border-left border-top"> {{ heading }} </th>
                        {% endfor %}
                    {% endif %}
                {% endfor %}
            </tr>
            
            {% for application_id, application in display_details.fields.items() %}
                <tr class="border-bottom border-right border-left border-top">
                    {% for field in application.values() %}
                        {% if field.label == "View More" %}
                            <td class="border-bottom border-right border-left border-top"> <a href={{ field.data }}> <i class="fas fa-eye"></i></a></td>
                        {% else %}
                            {% if field.label == "Delete Note" %}
                            <td class="border-bottom border-right border-left border-top"> <a href={{ field.data }}> <i class="fas fa-trash"></i></a></td>
                            {% else %}
                            <td class="border-bottom border-right border-left border-top"> {{ field.data }} </td>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}
        {% endif %}
        
{% endblock %}

