{% extends "layout.html" %}

{% block title %}
    Job Applications
{% endblock %}

{% block main %}
    <h1 class="text-center"> Job Applications </h1>
    <hr/>

    {% if get_flashed_messages() %}
        {% for message in get_flashed_messages() %}
            <div class="flash alert alert-success border text-center">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <h2 class="text-center"> Your Application History </h2>
    <!-- <a href="/add_job_application" class="button right_button">Add Application</a> -->

    <!-- <p> Today's date: {{ display_details.todays_date }} </p> -->
    <div class="button-grid"> 
        <a href="/add_job_application" class="link_button_primary extra-button-styles"> <i class="fas fa-plus"> Job Application </i></a>
    </div>
    {% if display_details.empty_table != True %}

        <table class="center"> 
            <tr class="border-bottom border-right border-left border-top blue-row-background">
                {% for key, value in display_details.items() %}
                    {% if key == "headings"  %}
                        {% for heading in value["headings_list"] %}
                            <th class="border-bottom border-right border-left border-top td-styling"> {{ heading }} </th>
                        {% endfor %}
                    {% endif %}
                {% endfor %}
            </tr>
            
            {% for application_id, application in display_details.fields.items() %}
                <tr>
                    <td class="border-bottom border-right border-left border-top td-styling"> {{ application.app_id.data }}</td>
                    <td class="border-bottom border-right border-left border-top td-styling"> {{ application.app_date.data }}</td>
                    <td class="border-bottom border-right border-left border-top td-styling"> {{ application.company_name.data }}</td>
                    <td class="border-bottom border-right border-left border-top td-styling"> {{ application.job_role.data }}</td>
                    <td class="border-bottom border-right border-left border-top td-styling"> {{ application.interview_stage.data }}</td>
                    <td class="border-bottom border-right border-left border-top td-styling"> {{ application.salary.data }}</td>
                    <td class="td-styling">
                        <a href={{ application.view_more.data }} class="link_button"> <i class="fas fa-eye"> View</i></a>
                    </td>
                    <td class="td-styling">
                        <a href={{ application.delete.data }} class="link_button"> <i class="fas fa-trash"> Delete</i></a>
                    </td>
                </tr>
            {% endfor %}
        </table>
    {% endif %}
{% endblock %}

