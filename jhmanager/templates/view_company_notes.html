{% extends "layout.html" %}

{% block title %}
    View Company Notes
{% endblock %}

{% block main %}
    <div class="alignfull">
        <div class="aligncenter"> 
            <h1 class="text-center"> {{ general_details.company_name }}</h1>

            {% if get_flashed_messages() %}
                {% for message in get_flashed_messages() %}
                    <div class="flash alert alert-success border text-center">{{ message }}</div>
                {% endfor %}
            {% endif %}

        </div>
    </div>

    <div class="alignfull background-colour">
        <div class="aligncenter"> 
            <h2 class="text-center"> Notes History </h2>
            <div class="button-grid link-button-margins"> 
                <a href={{ general_details.add_note_url }} class="link_button_primary"> <i class="fas fa-plus"> Add note For {{ general_details.company_name }}</i></a>
            </div>
            {% if not general_details.empty_table %}
                <table class="extra-margins">
                    <tr class="border-bottom border-right border-left border-top blue-row-background">
                        {% for heading in general_details.headings %}
                            <th class="border-bottom border-right border-left border-top td-styling"> {{ heading }}</th>
                        {% endfor %}
                    </tr>
                    {% for entry_id, note_fields in note_details.items() %}
                        <tr>
                            <td class="border-bottom border-right border-left border-top td-styling"> {{ entry_id }}</td>
                            <td class="border-bottom border-right border-left border-top td-styling"> {{ note_fields.entry_date }}</td>
                            <td class="border-bottom border-right border-left border-top td-styling"> {{ note_fields.subject }}</td>
                            <td class="border-bottom border-right border-left border-top td-styling"> {{ note_fields.note_text }}</td>
                            <td class="text-center link-button-margins">
                                <a href={{ note_fields.View_More }} class="link_button"> <i class="fas fa-eye"> View</i></a>
                                <a href={{ note_fields.Update_url }} class="link_button"> <i class="fas fa-pencil-alt"> Update</i></a>
                                <a href={{ note_fields.Delete_url }} class="link_button"> <i class="fas fa-trash"> Delete</i></a>
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}
        </div>
    </div>

    <div class="alignfull">
        <div class="aligncenter"> 
            <div class="text-center xxx-margins"> 
                <a href={{ general_details.return_to_company_url }} class="link_button_primary link-button-margins"> <i class="fas fa-angle-left"> Return to Company Profile</i></a>
                <a href={{ general_details.return_to_address_book }} class="link_button_primary link-button-margins"> <i class="fas fa-angle-double-left"> Return to Address Book</i></a>
            </div>
        </div>
    </div>

{% endblock %}