{% extends "layout.html" %}

{% block title %}
    Address Book
{% endblock %}

{% block main %}
    <div class="alignfull">
        <div class="aligncenter"> 
            <h1 class="card-headings-with-bottom-border"> Address Book:</h1>

            {% if get_flashed_messages() %}
                {% for message in get_flashed_messages() %}
                    <div class="flash alert alert-success border text-center">{{ message }}</div>
                {% endfor %}
            {% endif %}
        </div>
    </div>

    <div class="alignfull background-colour">
        <div class="aligncenter"> 
            <h2 class="card-headings"><i class="fas fa-users"></i> COMPANIES</h2>
            <div class="link-div-styling-with-xtra-margins"> 
                <a href={{ display.add_company }} class="link_button_primary text-center"> <i class="fas fa-plus"> New Company</i></a>
                <a href={{ display.company_directory }} class="link_button_primary text-center"> <i class="fas fa-eye"> View Company Directory</i></a>
            </div>
            {% if not display.empty_list %}
                <div class="four-col-grid extra-margins">
                    {% for company_id, company_details in company_details.fields.items() %}
                        <a href={{ company_details.view_company }} class="link-cards-alt-colour">
                            <i class="fas fa-hand-pointer"></i><h3 class="card-headings"><i class="fas fa-users"></i> {{ company_details.name }}</h3>
                            <div class="card-content"> 
                                <div class="form-row">
                                    <div class="col text-center"> 
                                        <i class="fas fa-pencil-ruler"> {{ company_details.description }}</i>
                                    </div>
                                </div>
                            </div>
                        </a>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>

    <div class="alignfull">
        <div class="aligncenter xxx-margins"> 
            <h2 class="card-headings"><i class="fas fa-user-alt"></i> INDIVIDUAL CONTACTS</h2>
            <div class="link-div-styling-with-xtra-margins"> 
                <a href={{ contacts_details.add_new_contact }} class="link_button_primary"><i class="fas fa-plus"> Add New Contact</i></a>
                <a href={{ contacts_details.view_contacts }} class="link_button_primary"> <i class="fas fa-eye"> View Contacts</i></a>
            </div>
            {% if not contacts_details.empty_list %}
                <div class="four-col-grid xxx-margins">
                    {% for contact_id, contact in contacts_details.fields.items() %}
                        <a href={{ contact.view_contact }} class="link-cards">
                            <i class="fas fa-hand-pointer"></i><h3 class="card-headings"><i class="fas fa-user-alt"></i> {{ contact.full_name }}</h3>
                            <div class="card-content"> 
                                <div class="form-row">
                                    <div class="col text-center"> 
                                        <i class="fas fa-pencil-ruler"> {{ contact.job_title }}</i>
                                    </div>
                                </div>
                                <br/>
                                {% if contact.company_name %}
                                    <div class="form-row">
                                        <div class="col text-center"> 
                                            <i class="fas fa-users"> {{ contact.company_name }}</i>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                        </a>
                    {% endfor %}
                </div>
            {% endif %}

        </div>
    </div>

{% endblock %}